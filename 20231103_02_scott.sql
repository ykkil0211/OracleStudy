SELECT USER
FROM DUAL;

SELECT *
FROM TBL_INSA;

/*
1001	홍길동	771212-1022432	1998-10-11	서울	011-2356-4528	기획부	부장	2610000	200000
1002	이순신	801007-1544236	2000-11-29	경기	010-4758-6532	총무부	사원	1320000	200000
1003	이순애	770922-2312547	1999-02-25	인천	010-4231-1236	개발부	부장	2550000	160000
1004	김정훈	790304-1788896	2000-10-01	전북	019-5236-4221	영업부	대리	1954200	170000
1005	한석봉	811112-1566789	2004-08-13	서울	018-5211-3542	총무부	사원	1420000	160000
1006	이기자	780505-2978541	2002-02-11	인천	010-3214-5357	개발부	과장	2265000	150000
1007	장인철	780506-1625148	1998-03-16	제주	011-2345-2525	개발부	대리	1250000	150000
1008	김영년	821011-2362514	2002-04-30	서울	016-2222-4444	홍보부	사원	950000	145000
1009	나윤균	810810-1552147	2003-10-10	경기	019-1111-2222	인사부	사원	840000	220400
1010	김종서	751010-1122233	1997-08-08	부산	011-3214-5555	영업부	부장	2540000	130000
1011	유관순	801010-2987897	2000-07-07	서울	010-8888-4422	영업부	사원	1020000	140000
1012	정한국	760909-1333333	1999-10-16	강원	018-2222-4242	홍보부	사원	880000	114000
1013	조미숙	790102-2777777	1998-06-07	경기	019-6666-4444	홍보부	대리	1601000	103000
1014	황진이	810707-2574812	2002-02-15	인천	010-3214-5467	개발부	사원	1100000	130000
1015	이현숙	800606-2954687	1999-07-26	경기	016-2548-3365	총무부	사원	1050000	104000
1016	이상헌	781010-1666678	2001-11-29	경기	010-4526-1234	개발부	과장	2350000	150000
1017	엄용수	820507-1452365	2000-08-28	인천	010-3254-2542	개발부	사원	950000	210000
1018	이성길	801028-1849534	2004-08-08	전북	018-1333-3333	개발부	사원	880000	123000
1019	박문수	780710-1985632	1999-12-10	서울	017-4747-4848	인사부	과장	2300000	165000
1020	유영희	800304-2741258	2003-10-10	전남	011-9595-8585	자재부	사원	880000	140000
1021	홍길남	801010-1111111	2001-09-07	경기	011-9999-7575	개발부	사원	875000	120000
1022	이영숙	800501-2312456	2003-02-25	전남	017-5214-5282	기획부	대리	1960000	180000
1023	김인수	731211-1214576	1995-02-23	서울		영업부	부장	2500000	170000
1024	김말자	830225-2633334	1999-08-28	서울	011-5248-7789	기획부	대리	1900000	170000
1025	우재옥	801103-1654442	2000-10-01	서울	010-4563-2587	영업부	사원	1100000	160000
1026	김숙남	810907-2015457	2002-08-28	경기	010-2112-5225	영업부	사원	1050000	150000
1027	김영길	801216-1898752	2000-10-18	서울	019-8523-1478	총무부	과장	2340000	170000
1028	이남신	810101-1010101	2001-09-07	제주	016-1818-4848	인사부	사원	892000	110000
1029	김말숙	800301-2020202	2000-09-08	서울	016-3535-3636	총무부	사원	920000	124000
1030	정정해	790210-2101010	1999-10-17	부산	019-6564-6752	총무부	과장	2304000	124000
1031	지재환	771115-1687988	2001-01-21	서울	019-5552-7511	기획부	부장	2450000	160000
1032	심심해	810206-2222222	2000-05-05	전북	016-8888-7474	자재부	사원	880000	108000
1033	김미나	780505-2999999	1998-06-07	서울	011-2444-4444	영업부	사원	1020000	104000
1034	이정석	820505-1325468	2005-09-26	경기	011-3697-7412	기획부	사원	1100000	160000
1035	정영희	831010-2153252	2002-05-16	인천		개발부	사원	1050000	140000
1036	이재영	701126-2852147	2003-08-10	서울	011-9999-9999	자재부	사원	960400	190000
1037	최석규	770129-1456987	1998-10-15	인천	011-7777-7777	홍보부	과장	2350000	187000
1038	손인수	791009-2321456	1999-11-15	부산	010-6542-7412	영업부	대리	2000000	150000
1039	고순정	800504-2000032	2003-12-28	경기	010-2587-7895	영업부	대리	2010000	160000
1040	박세열	790509-1635214	2000-09-10	경북	016-4444-7777	인사부	대리	2100000	130000
1041	문길수	721217-1951357	2001-12-10	충남	016-4444-5555	자재부	과장	2300000	150000
1042	채정희	810709-2000054	2003-10-17	경기	011-5125-5511	개발부	사원	1020000	200000
1043	양미옥	830504-2471523	2003-09-24	서울	016-8548-6547	영업부	사원	1100000	210000
1044	지수환	820305-1475286	2004-01-21	서울	011-5555-7548	영업부	사원	1060000	220000
1045	홍원신	690906-1985214	2003-03-16	전북	011-7777-7777	영업부	사원	960000	152000
1046	허경운	760105-1458752	1999-05-04	경남	017-3333-3333	총무부	부장	2650000	150000
1047	산마루	780505-1234567	2001-07-15	서울	018-0505-0505	영업부	대리	2100000	112000
1048	이기상	790604-1415141	2001-06-07	전남		개발부	대리	2050000	106000
1049	이미성	830908-2456548	2000-04-07	인천	010-6654-8854	개발부	사원	1300000	130000
1050	이미인	810403-2828287	2003-06-07	경기	011-8585-5252	홍보부	대리	1950000	103000
1051	권영미	790303-2155554	2000-06-04	서울	011-5555-7548	영업부	과장	2260000	104000
1052	권옥경	820406-2000456	2000-10-10	경기	010-3644-5577	기획부	사원	1020000	105000
1053	김싱식	800715-1313131	1999-12-12	전북	011-7585-7474	자재부	사원	960000	108000
1054	정상호	810705-1212141	1999-10-16	강원	016-1919-4242	홍보부	사원	980000	114000
1055	정한나	820506-2425153	2004-06-07	서울	016-2424-4242	영업부	사원	1000000	104000
1056	전용재	800605-1456987	2004-08-13	인천	010-7549-8654	영업부	대리	1950000	200000
1057	이미경	780406-2003214	1998-02-11	경기	016-6542-7546	자재부	부장	2520000	160000
1058	김신제	800709-1321456	2003-08-08	인천	010-2415-5444	기획부	대리	1950000	180000
1059	임수봉	810809-2121244	2001-10-10	서울	011-4151-4154	개발부	사원	890000	102000
1060	김신애	810809-2111111	2001-10-10	서울	011-4151-4444	개발부	사원	900000	102000
*/

-- 20231103_01_scott(plsql).sql 파일에서 FN_GENDER() 함수 생성 후 테스트 

SELECT NUM,NAME, SSN,FN_GENDER(SSN) "성별"
FROM TBL_INSA;
/*
1001	홍길동	771212-1022432	남자
1002	이순신	801007-1544236	남자
1003	이순애	770922-2312547	여자
1004	김정훈	790304-1788896	남자
1005	한석봉	811112-1566789	남자
1006	이기자	780505-2978541	여자
1007	장인철	780506-1625148	남자
1008	김영년	821011-2362514	여자
1009	나윤균	810810-1552147	남자
1010	김종서	751010-1122233	남자
1011	유관순	801010-2987897	여자
1012	정한국	760909-1333333	남자
1013	조미숙	790102-2777777	여자
1014	황진이	810707-2574812	여자
1015	이현숙	800606-2954687	여자
1016	이상헌	781010-1666678	남자
1017	엄용수	820507-1452365	남자
1018	이성길	801028-1849534	남자
1019	박문수	780710-1985632	남자
1020	유영희	800304-2741258	여자
1021	홍길남	801010-1111111	남자
1022	이영숙	800501-2312456	여자
1023	김인수	731211-1214576	남자
1024	김말자	830225-2633334	여자
1025	우재옥	801103-1654442	남자
1026	김숙남	810907-2015457	여자
1027	김영길	801216-1898752	남자
1028	이남신	810101-1010101	남자
1029	김말숙	800301-2020202	여자
1030	정정해	790210-2101010	여자
1031	지재환	771115-1687988	남자
1032	심심해	810206-2222222	여자
1033	김미나	780505-2999999	여자
1034	이정석	820505-1325468	남자
1035	정영희	831010-2153252	여자
1036	이재영	701126-2852147	여자
1037	최석규	770129-1456987	남자
1038	손인수	791009-2321456	여자
1039	고순정	800504-2000032	여자
1040	박세열	790509-1635214	남자
1041	문길수	721217-1951357	남자
1042	채정희	810709-2000054	여자
1043	양미옥	830504-2471523	여자
1044	지수환	820305-1475286	남자
1045	홍원신	690906-1985214	남자
1046	허경운	760105-1458752	남자
1047	산마루	780505-1234567	남자
1048	이기상	790604-1415141	남자
1049	이미성	830908-2456548	여자
1050	이미인	810403-2828287	여자
1051	권영미	790303-2155554	여자
1052	권옥경	820406-2000456	여자
1053	김싱식	800715-1313131	남자
1054	정상호	810705-1212141	남자
1055	정한나	820506-2425153	여자
1056	전용재	800605-1456987	남자
1057	이미경	780406-2003214	여자
1058	김신제	800709-1321456	남자
1059	임수봉	810809-2121244	여자
1060	김신애	810809-2111111	여자
*/

-- ㅇ 20231103_01_SCOTT(PLSQL).SQL 파일에서 FN_PAY()함수 생성 후 테스트
SELECT FN_POW(5,3)
FROM DUAL;

SELECT NUM,NAME,IBSADATE,FN_WORKYEAR(IBSADATE)
FROM TBL_INSA;
/*
1001	홍길동	1998-10-11	251
1002	이순신	2000-11-29	2210
1003	이순애	1999-02-25	240
1004	김정훈	2000-10-01	2311
1005	한석봉	2004-08-13	197
1006	이기자	2002-02-11	219
1007	장인철	1998-03-16	251
1008	김영년	2002-04-30	219
1009	나윤균	2003-10-10	208
1010	김종서	1997-08-08	262
1011	유관순	2000-07-07	2311
1012	정한국	1999-10-16	240
1013	조미숙	1998-06-07	251
1014	황진이	2002-02-15	219
1015	이현숙	1999-07-26	240
1016	이상헌	2001-11-29	219
1017	엄용수	2000-08-28	2311
1018	이성길	2004-08-08	197
1019	박문수	1999-12-10	2311
1020	유영희	2003-10-10	208
1021	홍길남	2001-09-07	2210
1022	이영숙	2003-02-25	208
1023	김인수	1995-02-23	284
1024	김말자	1999-08-28	240
1025	우재옥	2000-10-01	2311
1026	김숙남	2002-08-28	219
1027	김영길	2000-10-18	2311
1028	이남신	2001-09-07	2210
1029	김말숙	2000-09-08	2311
1030	정정해	1999-10-17	240
1031	지재환	2001-01-21	2210
1032	심심해	2000-05-05	2311
1033	김미나	1998-06-07	251
1034	이정석	2005-09-26	186
1035	정영희	2002-05-16	219
1036	이재영	2003-08-10	208
1037	최석규	1998-10-15	251
1038	손인수	1999-11-15	2311
1039	고순정	2003-12-28	197
1040	박세열	2000-09-10	2311
1041	문길수	2001-12-10	219
1042	채정희	2003-10-17	208
1043	양미옥	2003-09-24	208
1044	지수환	2004-01-21	197
1045	홍원신	2003-03-16	208
1046	허경운	1999-05-04	240
1047	산마루	2001-07-15	2210
1048	이기상	2001-06-07	2210
1049	이미성	2000-04-07	2311
1050	이미인	2003-06-07	208
1051	권영미	2000-06-04	2311
1052	권옥경	2000-10-10	2311
1053	김싱식	1999-12-12	2311
1054	정상호	1999-10-16	240
1055	정한나	2004-06-07	197
1056	전용재	2004-08-13	197
1057	이미경	1998-02-11	251
1058	김신제	2003-08-08	208
1059	임수봉	2001-10-10	2210
1060	김신애	2001-10-10	2210
*/

------------------------------------------------------------------------------
-- ㅇ "20231103_01_scott(plsql).sql"의 프로시저 관련 실습을 진행하기 위한 준비 

-- 실습 테이블 생성
CREATE TABLE TBL_STUDENTS
( ID        VARCHAR2(10)
, NAME      VARCHAR2(40)
, TEL       VARCHAR2(30)
, ADDR      VARCHAR2(100)
, CONSTRAINT STUDENTS_ID_PK PRIMARY KEY(ID)
);
-- Table TBL_STUDENTS이(가) 생성되었습니다.

-- 실습 테이블 생성 
CREATE TABLE TBL_IDPW
( ID       VARCHAR2(10)
, PW       VARCHAR2(30)
, CONSTRAINT IDPW_ID_PK PRIMARY KEY(ID)
);
-- Table TBL_IDPW이(가) 생성되었습니다.
DROP TABLE TBL_STUDENTS;

-- 두 테이블에 데이터 입력 
INSERT INTO TBL_STUDENTS(ID, NAME, TEL, ADDR)
VALUES('moon', '문정환','010-1111-1111','제주도 서퀴포시');


insert into tbl_idpw(id,pw)
values('moon','java006$');

SELECT *
FROM TBL_STUDENTS;

SELECT *
FROM TBL_IDPW;

-- 커밋
COMMIT;

--위의 업무를 수행하는 프로시저를 생성하게 되면
-- "EXEC PRC_STUDENT_INSERT INTO TBL_STUDENTS(ID, NAME, TEL, ADDR) VALUES('moon', '문정환','010-1111-1111','제주도 서퀴포시')"
-- 이와 같은 구문 한 줄로 양쪽 테이블 모두 제대로 데이터를 입력할 수 있음 

EXEC PRC_STUDENT_INSERT('wool','java006$','정한올','010-2222-2222','서울 강남구');
-- PL/SQL 프로시저가 성공적으로 완료되었습니다.

-- ㅇ 프로시저 호출 이후 확인 
SELECT *
FROM TBL_IDPW;
/*
moon	java006$
wool	java006$
*/
SELECT *
FROM TBL_STUDENTS;
/*
moon	문정환	010-1111-1111	제주도 서퀴포시
wool	정한올	010-2222-2222	서울 강남구
*/

-- ㅇ 실습 테이블 생성(TBL_SUNGJUK)
CREATE TABLE TBL_SUNGJUK
( HAKBUN    NUMBER
, NAME      VARCHAR2(40)
, KOR       NUMBER(3)
, ENG       NUMBER(3)
, MAT       NUMBER(3)
, CONSTRAINT SUNGJUK_HAKBUN_PK PRIMARY KEY(HAKBUN)
);
-- Table TBL_SUNGJUK이(가) 생성되었습니다.

-- ㅇ 생성된 테이블의 구조 변경 -> 컬럼 추가
-- 이미 생성된 테이블에 있는 컬럼을 통해서 계산할 수 있는 것들은 웬만하면 테이블에 넣지 않기
--  (총점->TOT, 평균->AVG, 등급->GRADE) 
ALTER TABLE TBL_SUNGJUK
ADD( TOT NUMBER(3), AVG NUMBER(4,1), GRADE CHAR);
-- Table TBL_SUNGJUK이(가) 변경되었습니다.

-- ㅇ 여기에서 추가한 컬럼에 대한 항목은 
-- 프로시저 실습을 쉽게 진행할 수 있도록 추가한 항목일 뿐 
-- 실제 테이블 구조에 적합하지도, 바람직하지도 않은 내용임! 

-- 기존 테이블의 데이터를 기반으로 쿼리문을 활용하여 얻을 수 있는 데이터는
-- 절대 테이블에 추가로 구성(테이블 내에 컬럼화) 하지 않음 

DESC TBL_SUNGJUK;
/*
이름     널?       유형           
------ -------- ------------ 
HAKBUN NOT NULL NUMBER       
NAME            VARCHAR2(40) 
KOR             NUMBER(3)    
ENG             NUMBER(3)    
MAT             NUMBER(3)    
TOT             NUMBER(3)    
AVG             NUMBER(4,1)  
GRADE           CHAR(1)   
*/

SELECT *
FROM TBL_SUNGJUK;
--1	김다슬	90	80	70	240	80	B
/*
1	김다슬	90	80	70	240	80	B
2	노은하	80	60	50	190	63.3	D
*/

-- ㅇ 프로시저 호출 이후 테이블 조회 
SELECT *
FROM TBL_SUNGJUK;

-- ㅇ TBL_STUDENTS 테이블 조회
SELECT *
FROM TBL_STUDENTS;
/*
moon	문정환	010-1111-1111	제주도 서퀴포시
wool	정한올	010-2222-2222	서울 강남구
*/

-- ㅇ TBL_INPW 테이블 조회
SELECT *
FROM TBL_IDPW;

select *
from tbl_emp;

update tbl_emp
set ename = 'SMIIIIITH'
where empno = 7369 and 1=1;

update tbl_emp
set ename = 'SMIIIIITH'
where empno = 7369 and 1=2;

rollback;

EXEC PRG_STUDENT_UPDATE('moon','java006$','010-9999-9999','강원도 홍천');

SELECT *
FROM TBL_STUDENTS;